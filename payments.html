<!doctype html>
<html>
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Payments</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/style.css" rel="stylesheet">
</head>
<body>
  <nav class="topnav"><div class="container d-flex justify-content-between align-items-center"><a class="brand" href="index.html">Madrasa Islamia Arabia Baith-ul-Uloom â€” Gadwal : Hifz Progress</a><div class="nav-links"><a href="students.html">Students</a><a href="sponsors.html">Sponsors</a><a href="payments.html" class="active">Payments</a></div></div></nav>

  <main class="container mt-4">
    <div class="card p-3">
      <h3>Payments / Updates</h3>
      <div class="muted mb-2">This page shows monthly payments or updates (if available).</div>
      <div id="paymentsArea"></div>
    </div>
  </main>

  <script src="assets/app.js"></script>
  <script>
    (async function(){
      const data = await window.loadData();
      // try to fetch payments.json (optional)
      try {
        const r = await fetch('payments.json');
        if(!r.ok) throw new Error('no payments.json');
        const payments = await r.json();
        const tbl = `<div class="table-responsive"><table class="table"><thead><tr><th>Date</th><th>Student</th><th>Sponsor</th><th>Amount</th><th>Note</th></tr></thead><tbody>${payments.map(p=>`<tr><td>${escapeHTML(p.date)}</td><td>${escapeHTML(p.student)}</td><td>${escapeHTML(p.sponsor)}</td><td>${escapeHTML(String(p.amount))}</td><td>${escapeHTML(p.note||'')}</td></tr>`).join('')}</tbody></table></div>`;
        document.getElementById('paymentsArea').innerHTML = tbl;
      } catch(e){
        document.getElementById('paymentsArea').innerHTML = '<div class="muted">No payment records found. To use this page, add <code>payments.json</code> to the repo with fields: <code>date,student,sponsor,amount,note</code>.</div>';
      }
    })();
  </script>
</body>
</html>
